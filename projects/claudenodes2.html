<div class="mt-6 pt-6 border-t border-gray-200">
                    <h3 class="font-bold text-lg mb-4">Legend:</h3><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Opinion Map: Parking Mandates</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            overflow-x: hidden;
        }
        .node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .node:hover {
            transform: scale(1.05);
            z-index: 100;
        }
        .node.active {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            z-index: 100;
        }
        .connection-line {
            transition: all 0.3s ease;
            opacity: 0.15;
        }
        .connection-line.active {
            opacity: 1;
            stroke-width: 4;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
        .pathway-active {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="max-w-7xl mx-auto p-6">
        <!-- Header -->
        <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-black p-8 rounded-lg shadow-lg mb-6">
            <h1 class="text-4xl font-bold mb-2">Interactive Public Opinion Map</h1>
            <p class="text-xl">Parking Mandates: How Opinion Forms Through Information Networks</p>
            <p class="text-sm mt-2 opacity-90">Click nodes to explore | Use buttons to trace complete pathways from sources to opinions</p>
        </div>

        <!-- Control Panel -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6">
            <div class="lg:col-span-1 bg-white p-6 rounded-lg shadow">
                <h3 class="font-bold text-lg mb-4">Show Opinion Clusters:</h3>
                <div class="space-y-2">
                    <button onclick="showPathway('defender')" class="w-full px-4 py-3 bg-red-600 text-white rounded hover:bg-red-700 font-semibold">
                        Status Quo Defenders
                    </button>
                    <button onclick="showPathway('reformer')" class="w-full px-4 py-3 bg-green-600 text-white rounded hover:bg-green-700 font-semibold">
                        Reformers (Urbanists)
                    </button>
                    <button onclick="showPathway('middle')" class="w-full px-4 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 font-semibold">
                        Free-Market Advocates
                    </button>
                    <button onclick="clearPathways()" class="w-full px-4 py-3 bg-gray-500 text-white rounded hover:bg-gray-600 font-semibold">
                        Clear All
                    </button>
                </div>

                <div class="mt-6 pt-6 border-t border-gray-200">
                    <h3 class="font-bold text-sm mb-3">Developer Split:</h3>
                    <p class="text-xs text-gray-600 mb-2">
                        <span class="inline-block w-3 h-3 bg-red-600 mr-1"></span>
                        <strong>Small/Local Developers</strong> ‚Üí Status Quo Defenders
                    </p>
                    <p class="text-xs text-gray-600 mb-2">
                        <span class="inline-block w-3 h-3 bg-blue-600 mr-1"></span>
                        <strong>Large Developers</strong> ‚Üí Free-Market Advocates
                    </p>
                    <p class="text-xs text-gray-600">
                        <span class="inline-block w-3 h-3 bg-green-600 mr-1"></span>
                        <strong>Pro-Density Developers</strong> ‚Üí Reformers
                    </p>
                    <p class="text-xs text-gray-500 mt-2 italic">Dashed lines show developer splits</p>
                </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 bg-teal-400 rounded-lg"></div>
                            <span>Information Sources</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 bg-gray-400 rounded-full"></div>
                            <span>Stakeholders</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 bg-blue-500 rounded"></div>
                            <span>Core Beliefs</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 bg-purple-500 rounded-full"></div>
                            <span>Terminal Values</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 bg-pink-500 rounded-full"></div>
                            <span>Instrumental Values</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 bg-orange-400 rounded"></div>
                            <span>Fears</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SVG Map -->
            <div class="lg:col-span-3 bg-white p-6 rounded-lg shadow">
                <svg id="opinion-map" width="100%" height="1100" viewBox="0 0 1100 1100">
                    <defs>
                        <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#DC2626" />
                        </marker>
                        <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#059669" />
                        </marker>
                        <marker id="arrow-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#2563EB" />
                        </marker>
                    </defs>

                    <!-- Connection Lines -->
                    <g id="connections">
                        <!-- Status Quo Defender Pathway (RED) -->
                        <line class="connection-line pathway-defender" x1="200" y1="120" x2="200" y2="190" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow-red)"/>
                        <line class="connection-line pathway-defender" x1="230" y1="250" x2="280" y2="320" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow-red)"/>
                        <line class="connection-line pathway-defender" x1="280" y1="360" x2="280" y2="450" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow-red)"/>
                        <line class="connection-line pathway-defender" x1="250" y1="480" x2="200" y2="560" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow-red)"/>
                        <line class="connection-line pathway-defender" x1="170" y1="590" x2="140" y2="670" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow-red)"/>
                        <line class="connection-line pathway-defender" x1="110" y1="720" x2="100" y2="800" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow-red)"/>
                        <line class="connection-line pathway-defender" x1="130" y1="850" x2="230" y2="930" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow-red)"/>

                        <!-- Reformer Pathway (GREEN) -->
                        <line class="connection-line pathway-reformer" x1="900" y1="120" x2="900" y2="190" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>
                        <line class="connection-line pathway-reformer" x1="870" y1="250" x2="820" y2="320" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>
                        <line class="connection-line pathway-reformer" x1="820" y1="360" x2="820" y2="450" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>
                        <line class="connection-line pathway-reformer" x1="850" y1="480" x2="900" y2="560" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>
                        <line class="connection-line pathway-reformer" x1="930" y1="590" x2="960" y2="670" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>
                        <line class="connection-line pathway-reformer" x1="990" y1="720" x2="1000" y2="800" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>
                        <line class="connection-line pathway-reformer" x1="970" y1="850" x2="870" y2="930" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>

                        <!-- Free Market Pathway (BLUE) -->
                        <line class="connection-line pathway-middle" x1="550" y1="120" x2="550" y2="190" stroke="#2563EB" stroke-width="2" marker-end="url(#arrow-blue)"/>
                        <line class="connection-line pathway-middle" x1="550" y1="250" x2="550" y2="320" stroke="#2563EB" stroke-width="2" marker-end="url(#arrow-blue)"/>
                        <line class="connection-line pathway-middle" x1="550" y1="360" x2="550" y2="450" stroke="#2563EB" stroke-width="2" marker-end="url(#arrow-blue)"/>
                        <line class="connection-line pathway-middle" x1="550" y1="480" x2="550" y2="560" stroke="#2563EB" stroke-width="2" marker-end="url(#arrow-blue)"/>
                        <line class="connection-line pathway-middle" x1="550" y1="590" x2="550" y2="670" stroke="#2563EB" stroke-width="2" marker-end="url(#arrow-blue)"/>
                        <line class="connection-line pathway-middle" x1="550" y1="720" x2="550" y2="800" stroke="#2563EB" stroke-width="2" marker-end="url(#arrow-blue)"/>
                        <line class="connection-line pathway-middle" x1="550" y1="850" x2="550" y2="930" stroke="#2563EB" stroke-width="2" marker-end="url(#arrow-blue)"/>

                        <!-- Developer Splits (DASHED LINES) -->
                        <!-- Small/Local Developers to Status Quo -->
                        <line class="connection-line pathway-defender" x1="320" y1="210" x2="250" y2="200" stroke="#DC2626" stroke-width="2.5" marker-end="url(#arrow-red)" stroke-dasharray="5,5"/>
                        
                        <!-- Pro-Density Developers to Reformers -->
                        <line class="connection-line pathway-reformer" x1="780" y1="210" x2="850" y2="200" stroke="#059669" stroke-width="2.5" marker-end="url(#arrow-green)" stroke-dasharray="5,5"/>
                    </g>

                    <!-- CENTRAL ISSUE (top) -->
                    <g class="node" data-id="center">
                        <rect x="400" y="20" width="300" height="60" rx="10" fill="#FCD34D" stroke="#F59E0B" stroke-width="3"/>
                        <text x="550" y="45" text-anchor="middle" font-size="16" font-weight="bold" fill="#000">Should cities eliminate</text>
                        <text x="550" y="65" text-anchor="middle" font-size="16" font-weight="bold" fill="#000">parking mandates?</text>
                    </g>

                    <!-- COLUMN 1: STATUS QUO DEFENDERS (LEFT - RED) -->
                    
                    <!-- Information Sources (TOP - TEAL) -->
                    <g class="node pathway-defender-node" data-id="source-defender" onclick="toggleNode(this)">
                        <rect x="130" y="95" width="140" height="50" rx="8" fill="#5EEAD4" stroke="#14B8A6" stroke-width="2"/>
                        <text x="200" y="115" text-anchor="middle" font-size="10" font-weight="bold" fill="#000">Conservative Media</text>
                        <text x="200" y="130" text-anchor="middle" font-size="9" fill="#000">Local News, Talk Radio</text>
                    </g>

                    <!-- Stakeholders -->
                    <g class="node pathway-defender-node" data-id="stakeholder-defender" onclick="toggleNode(this)">
                        <ellipse cx="200" cy="220" rx="85" ry="45" fill="#D1D5DB" stroke="#6B7280" stroke-width="2"/>
                        <text x="200" y="210" text-anchor="middle" font-size="10" font-weight="bold">Local Residents</text>
                        <text x="200" y="225" text-anchor="middle" font-size="10" font-weight="bold">Small Business Owners</text>
                        <text x="200" y="238" text-anchor="middle" font-size="9">Small/Local Developers</text>
                    </g>

                    <!-- Additional Developer Nodes -->
                    <g class="node pathway-defender-node" data-id="developer-small" onclick="toggleNode(this)">
                        <ellipse cx="320" cy="180" rx="65" ry="32" fill="#FCA5A5" stroke="#DC2626" stroke-width="2"/>
                        <text x="320" y="177" text-anchor="middle" font-size="9" font-weight="bold" fill="#7F1D1D">Small/Local</text>
                        <text x="320" y="189" text-anchor="middle" font-size="9" font-weight="bold" fill="#7F1D1D">Developers</text>
                    </g>

                    <!-- Core Belief -->
                    <g class="node pathway-defender-node" data-id="belief-defender" onclick="toggleNode(this)">
                        <rect x="210" y="320" width="140" height="60" rx="5" fill="#3B82F6" stroke="#1E40AF" stroke-width="2"/>
                        <text x="280" y="340" text-anchor="middle" font-size="11" fill="white" font-weight="bold">"Parking is</text>
                        <text x="280" y="355" text-anchor="middle" font-size="11" fill="white" font-weight="bold">essential‚Äîevery</text>
                        <text x="280" y="370" text-anchor="middle" font-size="11" fill="white" font-weight="bold">building needs it"</text>
                    </g>

                    <!-- Terminal Values -->
                    <g class="node pathway-defender-node" data-id="terminal-defender" onclick="toggleNode(this)">
                        <ellipse cx="280" cy="465" rx="75" ry="40" fill="#A855F7" stroke="#7C3AED" stroke-width="2"/>
                        <text x="280" y="460" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Security</text>
                        <text x="280" y="475" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Stability</text>
                    </g>

                    <!-- Instrumental Values -->
                    <g class="node pathway-defender-node" data-id="instrumental-defender" onclick="toggleNode(this)">
                        <ellipse cx="200" cy="575" rx="75" ry="40" fill="#EC4899" stroke="#BE185D" stroke-width="2"/>
                        <text x="200" y="570" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Regulation</text>
                        <text x="200" y="585" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Control</text>
                    </g>

                    <!-- Fears -->
                    <g class="node pathway-defender-node" data-id="fear-defender" onclick="toggleNode(this)">
                        <rect x="40" y="670" width="140" height="70" rx="5" fill="#FB923C" stroke="#EA580C" stroke-width="2"/>
                        <text x="110" y="690" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Overcrowding</text>
                        <text x="110" y="705" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Chaos</text>
                        <text x="110" y="720" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Losing customers</text>
                    </g>

                    <!-- Other Values -->
                    <g class="node pathway-defender-node" data-id="other-defender" onclick="toggleNode(this)">
                        <ellipse cx="100" cy="825" rx="80" ry="35" fill="#DDD6FE" stroke="#8B5CF6" stroke-width="2"/>
                        <text x="100" y="820" text-anchor="middle" font-size="10" fill="#4C1D95" font-weight="bold">Convenience, Order</text>
                        <text x="100" y="835" text-anchor="middle" font-size="10" fill="#4C1D95">Predictability</text>
                    </g>

                    <!-- Opinion -->
                    <g class="node pathway-defender-node" data-id="opinion-defender" onclick="toggleNode(this)">
                        <rect x="160" y="930" width="160" height="70" rx="8" fill="#DC2626" stroke="#991B1B" stroke-width="3"/>
                        <text x="240" y="955" text-anchor="middle" font-size="13" fill="white" font-weight="bold">KEEP MANDATES</text>
                        <text x="240" y="975" text-anchor="middle" font-size="11" fill="white">"Parking must be</text>
                        <text x="240" y="990" text-anchor="middle" font-size="11" fill="white">required by law"</text>
                    </g>

                    <!-- COLUMN 2: REFORMERS (RIGHT - GREEN) -->

                    <!-- Information Sources -->
                    <g class="node pathway-reformer-node" data-id="source-reformer" onclick="toggleNode(this)">
                        <rect x="830" y="95" width="140" height="50" rx="8" fill="#5EEAD4" stroke="#14B8A6" stroke-width="2"/>
                        <text x="900" y="115" text-anchor="middle" font-size="10" font-weight="bold" fill="#000">Progressive Media</text>
                        <text x="900" y="130" text-anchor="middle" font-size="9" fill="#000">Strong Towns, CityLab</text>
                    </g>

                    <!-- Stakeholders -->
                    <g class="node pathway-reformer-node" data-id="stakeholder-reformer" onclick="toggleNode(this)">
                        <ellipse cx="900" cy="220" rx="85" ry="45" fill="#D1D5DB" stroke="#6B7280" stroke-width="2"/>
                        <text x="900" y="210" text-anchor="middle" font-size="10" font-weight="bold">Planners</text>
                        <text x="900" y="225" text-anchor="middle" font-size="10" font-weight="bold">Advocacy Groups</text>
                        <text x="900" y="238" text-anchor="middle" font-size="9">Pro-Density Developers</text>
                    </g>

                    <g class="node pathway-reformer-node" data-id="developer-prodensity" onclick="toggleNode(this)">
                        <ellipse cx="780" cy="180" rx="65" ry="32" fill="#86EFAC" stroke="#059669" stroke-width="2"/>
                        <text x="780" y="177" text-anchor="middle" font-size="9" font-weight="bold" fill="#064E3B">Pro-Density</text>
                        <text x="780" y="189" text-anchor="middle" font-size="9" font-weight="bold" fill="#064E3B">Developers</text>
                    </g>

                    <!-- Core Belief -->
                    <g class="node pathway-reformer-node" data-id="belief-reformer" onclick="toggleNode(this)">
                        <rect x="750" y="320" width="140" height="60" rx="5" fill="#3B82F6" stroke="#1E40AF" stroke-width="2"/>
                        <text x="820" y="340" text-anchor="middle" font-size="11" fill="white" font-weight="bold">"Mandates waste</text>
                        <text x="820" y="355" text-anchor="middle" font-size="11" fill="white" font-weight="bold">land and raise</text>
                        <text x="820" y="370" text-anchor="middle" font-size="11" fill="white" font-weight="bold">housing costs"</text>
                    </g>

                    <!-- Terminal Values -->
                    <g class="node pathway-reformer-node" data-id="terminal-reformer" onclick="toggleNode(this)">
                        <ellipse cx="820" cy="465" rx="75" ry="40" fill="#A855F7" stroke="#7C3AED" stroke-width="2"/>
                        <text x="820" y="460" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Freedom</text>
                        <text x="820" y="475" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Equity</text>
                    </g>

                    <!-- Instrumental Values -->
                    <g class="node pathway-reformer-node" data-id="instrumental-reformer" onclick="toggleNode(this)">
                        <ellipse cx="900" cy="575" rx="75" ry="40" fill="#EC4899" stroke="#BE185D" stroke-width="2"/>
                        <text x="900" y="570" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Innovation</text>
                        <text x="900" y="585" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Flexibility</text>
                    </g>

                    <!-- Fears -->
                    <g class="node pathway-reformer-node" data-id="fear-reformer" onclick="toggleNode(this)">
                        <rect x="890" y="670" width="140" height="70" rx="5" fill="#FB923C" stroke="#EA580C" stroke-width="2"/>
                        <text x="960" y="690" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Climate impact</text>
                        <text x="960" y="705" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Inequality</text>
                        <text x="960" y="720" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Inefficient land use</text>
                    </g>

                    <!-- Other Values -->
                    <g class="node pathway-reformer-node" data-id="other-reformer" onclick="toggleNode(this)">
                        <ellipse cx="1000" cy="825" rx="80" ry="35" fill="#DDD6FE" stroke="#8B5CF6" stroke-width="2"/>
                        <text x="1000" y="820" text-anchor="middle" font-size="10" fill="#4C1D95" font-weight="bold">Sustainability</text>
                        <text x="1000" y="835" text-anchor="middle" font-size="10" fill="#4C1D95">Fairness, Affordability</text>
                    </g>

                    <!-- Opinion -->
                    <g class="node pathway-reformer-node" data-id="opinion-reformer" onclick="toggleNode(this)">
                        <rect x="790" y="930" width="160" height="70" rx="8" fill="#059669" stroke="#047857" stroke-width="3"/>
                        <text x="870" y="955" text-anchor="middle" font-size="13" fill="white" font-weight="bold">ELIMINATE MANDATES</text>
                        <text x="870" y="975" text-anchor="middle" font-size="11" fill="white">"Prioritize people</text>
                        <text x="870" y="990" text-anchor="middle" font-size="11" fill="white">over cars"</text>
                    </g>

                    <!-- COLUMN 3: FREE MARKET (CENTER - BLUE) -->

                    <!-- Information Sources -->
                    <g class="node pathway-middle-node" data-id="source-middle" onclick="toggleNode(this)">
                        <rect x="480" y="95" width="140" height="50" rx="8" fill="#5EEAD4" stroke="#14B8A6" stroke-width="2"/>
                        <text x="550" y="115" text-anchor="middle" font-size="10" font-weight="bold" fill="#000">Business Media</text>
                        <text x="550" y="130" text-anchor="middle" font-size="9" fill="#000">WSJ, Economist</text>
                    </g>

                    <!-- Stakeholders -->
                    <g class="node pathway-middle-node" data-id="stakeholder-middle" onclick="toggleNode(this)">
                        <ellipse cx="550" cy="220" rx="85" ry="45" fill="#D1D5DB" stroke="#6B7280" stroke-width="2"/>
                        <text x="550" y="205" text-anchor="middle" font-size="10" font-weight="bold">Large Developers</text>
                        <text x="550" y="220" text-anchor="middle" font-size="10" font-weight="bold">Economists</text>
                        <text x="550" y="235" text-anchor="middle" font-size="9">Business Councils</text>
                    </g>

                    <!-- Core Belief -->
                    <g class="node pathway-middle-node" data-id="belief-middle" onclick="toggleNode(this)">
                        <rect x="480" y="320" width="140" height="60" rx="5" fill="#3B82F6" stroke="#1E40AF" stroke-width="2"/>
                        <text x="550" y="340" text-anchor="middle" font-size="11" fill="white" font-weight="bold">"Markets should</text>
                        <text x="550" y="355" text-anchor="middle" font-size="11" fill="white" font-weight="bold">decide parking</text>
                        <text x="550" y="370" text-anchor="middle" font-size="11" fill="white" font-weight="bold">needs"</text>
                    </g>

                    <!-- Terminal Values -->
                    <g class="node pathway-middle-node" data-id="terminal-middle" onclick="toggleNode(this)">
                        <ellipse cx="550" cy="465" rx="75" ry="40" fill="#A855F7" stroke="#7C3AED" stroke-width="2"/>
                        <text x="550" y="460" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Prosperity</text>
                        <text x="550" y="475" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Autonomy</text>
                    </g>

                    <!-- Instrumental Values -->
                    <g class="node pathway-middle-node" data-id="instrumental-middle" onclick="toggleNode(this)">
                        <ellipse cx="550" cy="575" rx="75" ry="40" fill="#EC4899" stroke="#BE185D" stroke-width="2"/>
                        <text x="550" y="570" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Competition</text>
                        <text x="550" y="585" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Deregulation</text>
                    </g>

                    <!-- Fears -->
                    <g class="node pathway-middle-node" data-id="fear-middle" onclick="toggleNode(this)">
                        <rect x="480" y="670" width="140" height="70" rx="5" fill="#FB923C" stroke="#EA580C" stroke-width="2"/>
                        <text x="550" y="690" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Overregulation</text>
                        <text x="550" y="705" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Rising costs</text>
                        <text x="550" y="720" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Stifled business</text>
                    </g>

                    <!-- Other Values -->
                    <g class="node pathway-middle-node" data-id="other-middle" onclick="toggleNode(this)">
                        <ellipse cx="550" cy="825" rx="80" ry="35" fill="#DDD6FE" stroke="#8B5CF6" stroke-width="2"/>
                        <text x="550" y="820" text-anchor="middle" font-size="10" fill="#4C1D95" font-weight="bold">Efficiency</text>
                        <text x="550" y="835" text-anchor="middle" font-size="10" fill="#4C1D95">Growth, Choice</text>
                    </g>

                    <!-- Opinion -->
                    <g class="node pathway-middle-node" data-id="opinion-middle" onclick="toggleNode(this)">
                        <rect x="470" y="930" width="160" height="70" rx="8" fill="#2563EB" stroke="#1E40AF" stroke-width="3"/>
                        <text x="550" y="955" text-anchor="middle" font-size="13" fill="white" font-weight="bold">ELIMINATE MANDATES</text>
                        <text x="550" y="975" text-anchor="middle" font-size="11" fill="white">"Let markets</text>
                        <text x="550" y="990" text-anchor="middle" font-size="11" fill="white">decide"</text>
                    </g>
                </svg>
            </div>
        </div>

        <!-- Info Panel -->
        <div id="info-panel" class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded mt-6 hidden">
            <h3 class="font-bold text-lg mb-2" id="info-title">Node Information</h3>
            <p id="info-text" class="text-gray-700"></p>
        </div>

        <!-- Cluster Explanations -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
            <div class="bg-red-50 border-2 border-red-300 p-6 rounded-lg">
                <h3 class="font-bold text-xl text-red-800 mb-3">üõ°Ô∏è Status Quo Defenders</h3>
                <p class="text-sm text-gray-700 mb-3">
                    <strong>Core Belief:</strong> "Parking is essential‚Äîevery building needs it."
                </p>
                <p class="text-sm text-gray-700 mb-2"><strong>Terminal Values:</strong> Security, Stability</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Instrumental Values:</strong> Regulation, Control</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Other Values:</strong> Convenience, Order, Predictability</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Fears:</strong> Overcrowding, chaos, losing customers</p>
                <hr class="my-3 border-red-200"/>
                <p class="text-xs font-semibold mb-1">Information Sources:</p>
                <p class="text-xs mb-2">Conservative media, local news</p>
                <p class="text-xs font-semibold mb-1">Stakeholders:</p>
                <p class="text-xs">Local residents, small business owners, small/local developers</p>
            </div>

            <div class="bg-green-50 border-2 border-green-300 p-6 rounded-lg">
                <h3 class="font-bold text-xl text-green-800 mb-3">üå± Reformers (Urbanists)</h3>
                <p class="text-sm text-gray-700 mb-3">
                    <strong>Core Belief:</strong> "Parking mandates waste land and raise housing costs."
                </p>
                <p class="text-sm text-gray-700 mb-2"><strong>Terminal Values:</strong> Freedom, Equity</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Instrumental Values:</strong> Innovation, Flexibility</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Other Values:</strong> Sustainability, Fairness, Affordability</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Fears:</strong> Climate impact, inequality, inefficient land use</p>
                <hr class="my-3 border-green-200"/>
                <p class="text-xs font-semibold mb-1">Information Sources:</p>
                <p class="text-xs mb-2">Progressive media, Strong Towns, CityLab</p>
                <p class="text-xs font-semibold mb-1">Stakeholders:</p>
                <p class="text-xs">Planners, advocacy groups, pro-density developers</p>
            </div>

            <div class="bg-blue-50 border-2 border-blue-300 p-6 rounded-lg">
                <h3 class="font-bold text-xl text-blue-800 mb-3">üíº Free-Market Advocates</h3>
                <p class="text-sm text-gray-700 mb-3">
                    <strong>Core Belief:</strong> "Markets should decide how much parking is needed."
                </p>
                <p class="text-sm text-gray-700 mb-2"><strong>Terminal Values:</strong> Prosperity, Autonomy</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Instrumental Values:</strong> Competition, Deregulation</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Other Values:</strong> Efficiency, Economic Growth, Choice</p>
                <p class="text-sm text-gray-700 mb-2"><strong>Fears:</strong> Overregulation, rising costs, stifled business</p>
                <hr class="my-3 border-blue-200"/>
                <p class="text-xs font-semibold mb-1">Information Sources:</p>
                <p class="text-xs mb-2">Business media (WSJ, Economist)</p>
                <p class="text-xs font-semibold mb-1">Stakeholders:</p>
                <p class="text-xs">Large developers, economists, business councils</p>
            </div>
        </div>

        <!-- Key Insights -->
        <div class="mt-6 space-y-4">
            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded">
                <h3 class="font-bold text-lg mb-2">üîç Key Insight: Information Ecosystems</h3>
                <p class="text-gray-700">
                    Notice how <strong>each cluster has its own information ecosystem</strong>. Stakeholders consume different media sources, leading to different beliefs about reality itself. This creates <strong>parallel information worlds</strong> where people literally see different "facts."
                </p>
                <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1">
                    <li><strong>Status Quo Defenders</strong> see stories about parking shortages and neighborhood chaos</li>
                    <li><strong>Reformers</strong> read research about housing costs and climate impacts</li>
                    <li><strong>Free-Market Advocates</strong> focus on regulatory burden and economic efficiency</li>
                </ul>
            </div>

            <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded">
                <h3 class="font-bold text-lg mb-2">üìä Same Opinion, Different Values</h3>
                <p class="text-gray-700">
                    <strong>Reformers and Free-Market Advocates both want to eliminate mandates</strong>, but their pathways are completely different:
                </p>
                <div class="grid grid-cols-2 gap-4 mt-3">
                    <div class="bg-white p-3 rounded border border-green-300">
                        <p class="text-xs font-bold text-green-800 mb-1">Reformers</p>
                        <p class="text-xs">Progressive values ‚Üí Climate & equity concerns ‚Üí "Eliminate mandates for sustainability"</p>
                    </div>
                    <div class="bg-white p-3 rounded border border-blue-300">
                        <p class="text-xs font-bold text-blue-800 mb-1">Free-Market</p>
                        <p class="text-xs">Libertarian values ‚Üí Efficiency concerns ‚Üí "Eliminate mandates for markets"</p>
                    </div>
                </div>
                <p class="text-gray-700 mt-2 font-semibold">
                    ‚Üí This explains <strong>strange bedfellows coalitions</strong> in zoning reform!
                </p>
            </div>

            <div class="bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded">
                <h3 class="font-bold text-lg mb-2">üéØ How to Use This Map</h3>
                <p class="text-gray-700 mb-2">
                    <strong>For campaigns and advocacy:</strong>
                </p>
                <ul class="list-disc list-inside text-gray-700 space-y-1 text-sm">
                    <li>Identify which cluster(s) your target audience belongs to</li>
                    <li>Frame your message using THEIR values, not yours</li>
                    <li>Address THEIR fears, not the fears you think they should have</li>
                    <li>Use THEIR information sources to reach them</li>
                    <li>Build coalitions by finding shared terminal values despite different pathways</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let activeNodes = new Set();
        let currentPathway = null;

        const nodeInfo = {
            'center': {
                title: 'Central Issue',
                text: 'The focal question around which all beliefs, values, and sources connect. Public opinion forms through pathways: Information Sources ‚Üí Stakeholders ‚Üí Beliefs ‚Üí Values ‚Üí Fears ‚Üí Opinions.'
            },
            'source-defender': {
                title: 'Information Source: Conservative Media',
                text: 'Local news emphasizing crime, disorder, and parking shortages. Talk radio amplifying concerns about regulation and government overreach. Focus on conflict and problems (negativity bias).'
            },
            'stakeholder-defender': {
                title: 'Stakeholders: Residents, Small Business & Small Developers',
                text: 'People living in neighborhoods, running local businesses, and building small-scale projects. Experience parking challenges daily. Concerned about neighborhood character, customer access, and project viability.'
            },
            'developer-small': {
                title: 'Small/Local Developers',
                text: 'Smaller developers building neighborhood-scale projects (single-family, small retail). Concerned about customer parking and market risk. Less capital and sophistication than large developers. Align with Status Quo due to perceived need for guaranteed parking to attract buyers/tenants.'
            },
            'belief-defender': {
                title: 'Core Belief: Parking is Essential',
                text: 'Based on car-centric lifestyle and personal experience. "Everyone needs a place to park" seems self-evident. Alternative transportation not seen as viable.'
            },
            'terminal-defender': {
                title: 'Terminal Values: Security & Stability',
                text: 'Deep preference for predictability and order. Change represents risk. The current system feels safe even if imperfect. Loss aversion is strong.'
            },
            'instrumental-defender': {
                title: 'Instrumental Values: Regulation & Control',
                text: 'Belief that government mandates prevent chaos. Trust rules over markets. Prefer requirements to recommendations.'
            },
            'fear-defender': {
                title: 'Fears: Chaos & Loss',
                text: 'Fear of not finding parking, overcrowded neighborhoods, losing business customers. Status quo bias: overestimate risks of change, underestimate costs of inaction.'
            },
            'other-defender': {
                title: 'Other Values: Convenience, Order, Predictability',
                text: 'Day-to-day priorities: easy parking access, organized neighborhoods, knowing what to expect.'
            },
            'opinion-defender': {
                title: 'Opinion: Keep Mandates',
                text: 'Conclusion: Parking requirements must remain. Without mandates, neighborhood order and business viability are at risk.'
            },
            'source-reformer': {
                title: 'Information Source: Progressive Media',
                text: 'Strong Towns articles on land use efficiency. CityLab/Bloomberg coverage of housing crisis. Academic research on parking costs. Climate-focused reporting.'
            },
            'stakeholder-reformer': {
                title: 'Stakeholders: Planners, Advocates & Pro-Density Developers',
                text: 'Urban planners with professional training in land use. Housing advocacy groups focused on affordability. Pro-density developers building urban infill and multifamily housing near transit.'
            },
            'developer-prodensity': {
                title: 'Pro-Density Developers',
                text: 'Developers focused on urban infill, transit-oriented development, and multifamily housing. See parking mandates as major cost barrier to affordable housing production. Often building in walkable neighborhoods where residents want fewer cars. Align with Reformers on housing affordability and sustainability.'
            },
            'belief-reformer': {
                title: 'Core Belief: Mandates Waste Land & Raise Costs',
                text: 'Research-backed understanding: parking costs $50K+ per space, most sits empty, land could be better used. Housing crisis makes costs painfully visible.'
            },
            'terminal-reformer': {
                title: 'Terminal Values: Freedom & Equity',
                text: 'Freedom from car dependency. Equity: lower-income people shouldn\'t subsidize parking they don\'t use. Housing as a right, not a commodity.'
            },
            'instrumental-reformer': {
                title: 'Instrumental Values: Innovation & Flexibility',
                text: 'Belief that adaptive systems work better than rigid rules. Innovation in transportation (transit, bikes, car-share) enables new approaches.'
            },
            'fear-reformer': {
                title: 'Fears: Climate & Inequality',
                text: 'Fear of climate catastrophe from car-centric development. Fear that housing unaffordability will displace communities and deepen inequality.'
            },
            'other-reformer': {
                title: 'Other Values: Sustainability, Fairness, Affordability',
                text: 'Environmental sustainability (climate action). Fairness (don\'t force people to pay for parking). Affordability (housing access for all).'
            },
            'opinion-reformer': {
                title: 'Opinion: Eliminate Mandates',
                text: 'Conclusion: Remove parking requirements. Let developers and residents make choices. Prioritize people and housing over cars and asphalt.'
            },
            'source-middle': {
                title: 'Information Source: Business Media',
                text: 'Wall Street Journal coverage of regulatory costs. The Economist on market solutions. Business publications focused on growth and efficiency. Economic think tank reports.'
            },
            'stakeholder-middle': {
                title: 'Stakeholders: Large Developers, Economists, Business',
                text: 'Large real estate developers seeking to reduce regulatory costs and increase flexibility. Economists advocating market-based solutions. Business councils promoting growth and deregulation. Have capital and sophistication to navigate market uncertainty.'
            },
            'belief-middle': {
                title: 'Core Belief: Markets Should Decide',
                text: 'Free-market conviction: supply and demand allocate resources better than government. If people want parking, they\'ll pay for it. If not, don\'t force it.'
            },
            'terminal-middle': {
                title: 'Terminal Values: Prosperity & Autonomy',
                text: 'Prosperity through economic growth and development. Autonomy: property owners and businesses should control their own decisions.'
            },
            'instrumental-middle': {
                title: 'Instrumental Values: Competition & Deregulation',
                text: 'Competition creates efficiency and innovation. Deregulation unleashes market forces. Less government intervention = better outcomes.'
            },
            'fear-middle': {
                title: 'Fears: Overregulation & Cost',
                text: 'Fear that excessive regulation stifles business, raises costs, prevents development. Red tape seen as barrier to prosperity and growth.'
            },
            'other-middle': {
                title: 'Other Values: Efficiency, Growth, Choice',
                text: 'Efficiency (optimal resource use). Economic growth (development = jobs). Choice (consumer freedom and market options).'
            },
            'opinion-middle': {
                title: 'Opinion: Eliminate Mandates',
                text: 'Conclusion: Remove parking mandates, but from market perspective. Let developers decide based on customer demand and profit calculations.'
            }
        };

        function toggleNode(element) {
            const nodeId = element.getAttribute('data-id');
            
            if (activeNodes.has(nodeId)) {
                element.classList.remove('active');
                activeNodes.delete(nodeId);
            } else {
                element.classList.add('active');
                activeNodes.add(nodeId);
            }

            showNodeInfo(nodeId);
        }

        function showNodeInfo(nodeId) {
            const infoPanel = document.getElementById('info-panel');
            const infoTitle = document.getElementById('info-title');
            const infoText = document.getElementById('info-text');
            
            if (nodeInfo[nodeId]) {
                const info = nodeInfo[nodeId];
                infoTitle.textContent = info.title;
                infoText.textContent = info.text;
                infoPanel.classList.remove('hidden');
            }
        }

        function showPathway(type) {
            clearPathways();
            currentPathway = type;
            
            const lines = document.querySelectorAll('.pathway-' + type);
            lines.forEach(line => {
                line.classList.add('active', 'pathway-active');
            });

            const nodes = document.querySelectorAll('.pathway-' + type + '-node');
            nodes.forEach(node => {
                node.classList.add('active');
            });
        }

        function clearPathways() {
            const lines = document.querySelectorAll('.connection-line');
            lines.forEach(line => {
                line.classList.remove('active', 'pathway-active');
            });

            const nodes = document.querySelectorAll('.node');
            nodes.forEach(node => node.classList.remove('active'));
            
            activeNodes.clear();
            currentPathway = null;
            document.getElementById('info-panel').classList.add('hidden');
        }
    </script>
</body>
</html>
